<mat-card class="habsburg-card">
  <table class="foobar">
    <tr>
      <td>
        <mat-card-header>
          <div mat-card-avatar class="habsburg-icon"></div>
          <mat-card-title>{{habsburg?.first_name}} {{habsburg?.ordinal_number}}</mat-card-title>
          <mat-card-subtitle>{{habsburg?.name_suffix}}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p>{{habsburg?.description}}</p>
          <table>
            <tr>
              <td>
                Geburtsdatum:
              </td>
              <td>
                {{habsburg?.date_of_birth | date : 'd.M.yyyy'}}
              </td>
            </tr>
            <tr>
              <td>
                Sterbedatum:
              </td>
              <td>
                {{habsburg?.date_of_death | date : 'd.M.yyyy'}}
              </td>
            </tr>
          </table>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button style="color: black" [routerLink]="'/add-habsburg/' + habsburg?.pk"
                  *ngIf="studyburgsUserService.hasNeededPermission('studyburgs.change_person')">Edit
          </button>
          <button mat-button [routerLink]="['/add-notes',{note_for_person: habsburg?.pk}]">ADD NOTE</button>
        </mat-card-actions>

        <form [formGroup]="learnedFormGroup" (ngSubmit)="createOrUpdateLearned()">
          <table style="width: 250px">
            <tr>
              <td>
                <button mat-button color="yellow" [disabled]="!learnedFormGroup.valid">
                  <span>Submit</span>
                </button>
              </td>
              <td>
                <mat-checkbox formControlName="state">
                  <div *ngIf="learnedFormGroup.controls.pk.value">
                    <span *ngIf="!learnedHabsburg.state">Not yet learned</span>
                    <span *ngIf="learnedHabsburg.state">Learned</span>
                  </div>
                  <div *ngIf="!learnedFormGroup.controls.pk.value">
                    <span>Not yet learned</span>
                  </div>
                </mat-checkbox>
              </td>
            </tr>
          </table>
        </form>

      </td>
      <td>
      </td>
      <td width="350">
        <img mat-card-image src="{{habsburg?.picture_url}}" alt="Photo of Habsburg">
      </td>
    </tr>
  </table>
</mat-card>


<ng-template ngFor let-item [ngForOf]="notes" let-i="index">
  <li>
    <h1>Hello there</h1>
  </li>
</ng-template>

<table mat-table [dataSource]="notes" matSort class="mat-elevation-z8">

  <!-- Title Column -->
  <ng-container matColumnDef="title">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Title</th>
    <td mat-cell *matCellDef="let element"> {{element?.title}} </td>
  </ng-container>

  <!-- Content Column -->
  <ng-container matColumnDef="content">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Content</th>
    <td mat-cell *matCellDef="let element"> {{element?.content}} </td>
  </ng-container>

  <!-- Creation date Column -->
  <ng-container matColumnDef="creation_date_time">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Creation Date</th>
    <td mat-cell *matCellDef="let element">
      {{element?.creation_date_time | date : 'd.M.yyyy'}}
    </td>
  </ng-container>



  <!-- Edit Column -->
  <ng-container matColumnDef="edit">
    <th mat-header-cell *matHeaderCellDef mat-sort-header></th>
    <td mat-cell *matCellDef="let element">
      <button mat-button color="primary" [routerLink]="['/add-notes/' + element?.pk ,{note_for_person: habsburg?.pk}]">Edit</button>
    </td>
  </ng-container>

  <!-- Delete Column -->
  <ng-container matColumnDef="delete">
    <th mat-header-cell *matHeaderCellDef mat-sort-header></th>
    <td mat-cell *matCellDef="let element">
      <button mat-button color="warn" (click)="deleteNote(element)" *ngIf="studyburgsUserService.hasNeededPermission('studyburgs.delete_note')">Delete</button>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>
